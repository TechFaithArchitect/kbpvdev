<template>
    <div class="slds-p-vertical_medium">
        <c-poe_lwc-progress-indicator steps={buyflowSteps} current-step={currentStep}> </c-poe_lwc-progress-indicator>
    </div>
    <template lwc:if={showSpectrumInfoTab}>
        <c-poe_lwc-buyflow-charter-api-info-tab
            record-id={recordId}
            logo={logo}
            origin={origin}
            zip={zip}
            oncheckserviceability={handleCheckServiceability}
            onback={handleBack}
            is-guest-user={isGuestUser}
            return-url={returnUrl}
            onlogerror={handleLogError}
        ></c-poe_lwc-buyflow-charter-api-info-tab>
    </template>
    <template lwc:if={showSpectrumProductsTab}>
        <c-poe_lwc-buyflow-spectrum-products-tab
            record-id={recordId}
            user-id={userId}
            logo={logo}
            origin={origin}
            contact={contact}
            product-info={offers}
            session-id={sessionId}
            is-guest-user={isGuestUser}
            selected={productSelected}
            onproductselection={handleProductSelection}
            onback={handleBack}
            return-url={returnUrl}
            onlogerror={handleLogError}
        ></c-poe_lwc-buyflow-spectrum-products-tab>
    </template>
    <template lwc:if={showSpectrumCustomizationsTab}>
        <c-poe_lwc-buyflow-spectrum-api-customizations-tab
            record-id={recordId}
            user-id={userId}
            has-phone={hasPhone}
            has-mobile={hasMobile}
            order-info={orderInfo}
            logo={logo}
            origin={origin}
            contact={contact}
            is-guest-user={isGuestUser}
            cart-info={cartProducts}
            product-selection={productSelection}
            stored-configurations={storedConfigurations}
            onstoreconfigurations={handleStoreConfigurations}
            onnext={handleCustomizationSelection}
            onback={handleBack}
            return-url={returnUrl}
            onlogerror={handleLogError}
        ></c-poe_lwc-buyflow-spectrum-api-customizations-tab>
    </template>
    <template lwc:if={showSpectrumInstallationTab}>
        <c-poe_lwc-buyflow-spectrum-api-installation-tab
            cart-info={cartCustomizations}
            product-selection={productSelection}
            logo={logo}
            has-phone={hasPhone}
            has-mobile={hasMobile}
            credit-check-performed={creditCheckPerformed}
            origin={origin}
            order-request={orderInfo}
            is-guest-user={isGuestUser}
            ontpvnext={handleInstallationDateSelection}
            onback={handleBack}
            return-url={returnUrl}
            onlogerror={handleLogError}
        ></c-poe_lwc-buyflow-spectrum-api-installation-tab>
    </template>
    <template lwc:if={showSpectrumCreditCheckTab}>
        <c-poe_lwc-buyflow-spectrum-credit-check-tab
            record-id={recordId}
            logo={logo}
            origin={origin}
            order-info={orderInfo}
            order={sfOrderId}
            date-value={installationInfo}
            alternative-date-value={alternativeInstallationInfo}
            schedule-required={scheduleRequired}
            dob={dob}
            has-phone={hasPhone}
            has-mobile={hasMobile}
            paperless-option={paperless}
            is-guest-user={isGuestUser}
            address-info={addressInfo}
            credit-check-performed={creditCheckPerformed}
            cart-info={cartInstallation}
            use-service-address={useServiceAddress}
            product-selection={productSelection}
            referral-code-data={referralCodeData}
            onproduct={handleRemoveProduct}
            oncreditchecknext={handleCreditCheckPassed}
            onback={handleBack}
            return-url={returnUrl}
            onlogerror={handleLogError}
        ></c-poe_lwc-buyflow-spectrum-credit-check-tab>
    </template>
    <template lwc:if={showSpectrumOrderReviewTab}>
        <c-poe_lwc-buyflow-spectrum-api-order-summary-tab
            logo={logo}
            has-phone={hasPhone}
            has-mobile={hasMobile}
            cart-info={cartCreditCheck}
            order-info={orderInfo}
            product-selection={productSelection}
            record-id={recordId}
            installation-info={installationInfo}
            installation-type={installationType}
            earliest-date={earliestDate}
            self-install={selfInstall}
            is-guest-user={isGuestUser}
            delivery-date={deliveryDate}
            alternative-installation-info={alternativeInstallationInfo}
            onreviewnext={handleOrderReview}
        ></c-poe_lwc-buyflow-spectrum-api-order-summary-tab>
    </template>
    <template lwc:if={showSpectrumPaymentTab}>
        <c-poe_lwc-buyflow-spectrum-checkout-tab
            cart={cartCreditCheck}
            record-id={recordId}
            origin={origin}
            has-phone={hasPhone}
            has-mobile={hasMobile}
            prepayment={prepayment}
            due-today={dueToday}
            is-guest-user={isGuestUser}
            delinquent={delinquent}
            customer={orderInfo.customer}
            billing-address={orderInfo.account.billingAddress}
            address={orderInfo.address}
            payment-attempts={paymentAttempts}
            auto-pay={autoPaySelected}
            use-service-address={useServiceAddress}
            session-id={productSelection.sessionId}
            offer-id={productSelection.offerId}
            logo={logo}
            onpaymentnext={handlePaymentValidated}
            onback={handleBack}
            return-url={returnUrl}
            onlogerror={handleLogError}
        ></c-poe_lwc-buyflow-spectrum-checkout-tab>
    </template>
    <template lwc:if={showSpectrumOrderConfirmationTab}>
        <c-poe_lwc-buyflow-spectrum-api-order-confirmation-tab
            logo={logo}
            origin={origin}
            record-id={recordId}
            user-id={userId}
            order-info={orderInfo}
            mobile-selected={mobileSelected}
            affiliate-id={affiliateId}
            has-phone={hasPhone}
            has-mobile={hasMobile}
            sf-order-id={sfOrderId}
            order-item-id={sfOrderItemId}
            installation-info={installationInfo}
            installation-type={installationType}
            delivery-date={deliveryDate}
            is-guest-user={isGuestUser}
            alternative-installation-info={alternativeInstallationInfo}
            earliest-date={earliestDate}
            cart-info={cartPayment}
            self-install={selfInstall}
            product-selection={productSelection}
            onconfirmationnext={handleConfirmationNext}
            return-url={returnUrl}
            sales-id={salesId}
            onlogerror={handleLogError}
        ></c-poe_lwc-buyflow-spectrum-api-order-confirmation-tab>
    </template>
    <template lwc:if={showSpectrumOrderSuccessTab}>
        <c-poe_lwc-buyflow-spectrum-order-success-tab
            order-number={orderNumber}
            order-id={orderId}
            email={orderInfo.customer.emailAddress}
            phone={orderInfo.customer.phoneNumber}
            record-id={recordId}
            is-guest-user={isGuestUser}
            reference-number={referenceNumber}
            automation-success={automationSuccess}
            origin={origin}
            onback={handleBack}
            return-url={returnUrl}
            onlogerror={handleLogError}
        ></c-poe_lwc-buyflow-spectrum-order-success-tab>
    </template>
</template>
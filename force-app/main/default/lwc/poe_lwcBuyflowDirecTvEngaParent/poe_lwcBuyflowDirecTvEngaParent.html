<template>
    <div class="slds-p-vertical_medium">
        <c-poe_lwc-progress-indicator current-step={currentStep} steps={buyflowSteps}> </c-poe_lwc-progress-indicator>
    </div>
    <template lwc:if={showDirecTVInfoTab}>
        <c-poe_lwc-buyflow-direc-tv-enga-info-tab
            record-id={recordId}
            logo={logo}
            origin={origin}
            code-n-f-f-l={codeNFFL}
            code-f-f-l={codeFFL}
            client-info={clientInfo}
            return-url={returnUrl}
            is-guest-user={isGuestUser}
            is-f-s-l={isFSL}
            fsl-dealer-code={fslDealerCode}
            oncheckserviceability={handleCheckServiceability}
            onback={handleBack}
            onlogerror={handleLogError}
        ></c-poe_lwc-buyflow-direc-tv-enga-info-tab>
    </template>
    <template lwc:if={showDirecTVProductsTab}>
        <c-poe_lwc-buyflow-direc-tv-enga-products-tab
            record-id={recordId}
            user-id={userId}
            logo={logo}
            origin={origin}
            selected={selectedProduct}
            return-url={returnUrl}
            order-info={orderInfo}
            non-fulfillment={NFFL}
            dealer-code={dealerCode}
            is-guest-user={isGuestUser}
            onproductselection={handleProductSelection}
            onback={handleBack}
            onlogerror={handleLogError}
        ></c-poe_lwc-buyflow-direc-tv-enga-products-tab>
    </template>
    <template lwc:if={showDirecTVCreditCheckTab}>
        <c-poe_lwc-buyflow-direc-tv-enga-credit-check-tab
            order-info={orderInfo}
            stream={isStream}
            client-info={clientInfo}
            return-url={returnUrl}
            account-id={accountId}
            cart-info={cartInfo}
            billing-info={billingInfo}
            dealer-on-probation={probation}
            cart-finished={cartFinished}
            order={sfOrderId}
            add-cart-data={addCartData}
            onupdatetreatment={handleUpdateTreatment}
            disclaimers={legalCustomizations}
            logo={logo}
            origin={origin}
            record-id={recordId}
            is-guest-user={isGuestUser}
            onback={handleBack}
            onproduct={handleRemoveProduct}
            oncreditchecknext={handleCreditCheckPassed}
            referral-code-data={referralCodeData}
            onlogerror={handleLogError}
        ></c-poe_lwc-buyflow-direc-tv-enga-credit-check-tab>
    </template>
    <template lwc:if={showDirecTVOffersTab}>
        <c-poe_lwc-buyflow-direc-tv-enga-offers-tab
            stream={isStream}
            international-required={internationalRequired}
            cart-info={cartHardware}
            offers={offers}
            add-cart-data={addCartData}
            order-info={orderInfo}
            billing-info={billingInfo}
            base-offers={baseOffers}
            cart-finished={cartFinished}
            closing-offers={closingOffers}
            protections={protections}
            logo={logo}
            return-url={returnUrl}
            origin={origin}
            record-id={recordId}
            client-info={clientInfo}
            treatment-code={treatmentCode}
            is-guest-user={isGuestUser}
            onoffernext={handleOffersNext}
            onback={handleBack}
            onlogerror={handleLogError}
        ></c-poe_lwc-buyflow-direc-tv-enga-offers-tab>
    </template>
    <template lwc:if={isStream}>
        <template lwc:if={showDirecTVHardwareTab}>
            <c-poe_lwc-buyflow-direc-t-v-enga-hardware-tab
                record-id={recordId}
                user-id={userId}
                verbiages={verbiages}
                account-id={accountId}
                cart-info={cartCreditCheck}
                order={sfOrderId}
                logo={logo}
                add-cart-data={addCartData}
                treatment-code={treatmentCode}
                origin={origin}
                order-info={orderInfo}
                return-url={returnUrl}
                client-info={clientInfo}
                is-guest-user={isGuestUser}
                onhardwarenext={handleProductDetail}
                onback={handleBack}
                onlogerror={handleLogError}
                onhome={handleHome}
            ></c-poe_lwc-buyflow-direc-t-v-enga-hardware-tab>
        </template>
        <template lwc:if={showDirecTVOptionsTab}>
            <c-poe_lwc-buyflow-direc-t-v-enga-options-tab
                stream={isStream}
                order-info={orderInfo}
                cart-info={cartOffers}
                verbiages={streamVerbiages}
                client-info={clientInfo}
                logo={logo}
                origin={origin}
                record-id={recordId}
                verified-email={verifiedEmail}
                return-url={returnUrl}
                is-guest-user={isGuestUser}
                onoptionsnext={handleOptionsNext}
                onback={handleBack}
                onlogerror={handleLogError}
            ></c-poe_lwc-buyflow-direc-t-v-enga-options-tab>
        </template>
        <template lwc:if={showDirecTVTermsTab}>
            <c-poe_lwc-buyflow-direc-tv-enga-terms-tab
                stream={isStream}
                product-terms={terms}
                verbiages={verbiages}
                client-info={clientInfo}
                current-ip={currentIp}
                order-info={orderInfo}
                record-id={recordId}
                origin={origin}
                cart-info={cartOffers}
                logo={logo}
                return-url={returnUrl}
                is-guest-user={isGuestUser}
                onback={handleBack}
                ontermsnext={handleTermsNext}
                onlogerror={handleLogError}
            ></c-poe_lwc-buyflow-direc-tv-enga-terms-tab
        ></template>
        <template lwc:if={showDirecTVPaymentInformation}>
            <c-poe_lwc-buyflow-direc-tv-enga-stream-payment-information-tab
                stream={isStream}
                order-info={orderInfo}
                payment-attempts={paymentAttempts}
                cart-info={cartOffers}
                client-info={clientInfo}
                origin={origin}
                record-id={recordId}
                logo={logo}
                return-url={returnUrl}
                public-key={publicKey}
                is-guest-user={isGuestUser}
                onback={handleBack}
                onpaymentinformationnext={handlePaymentInformationNext}
                onlogerror={handleLogError}
            ></c-poe_lwc-buyflow-direc-tv-enga-stream-payment-information-tab
        ></template>
        <template lwc:if={showDirecTVPaymentConfirmationTab}>
            <c-poe_lwc-buyflow-direc-tv-enga-stream-order-confirmation-tab
                stream={isStream}
                nffl={NFFL}
                order-info={orderQualReq}
                product-selected={productSelected}
                hardware-selected={hardwareSelected}
                cart-info={cartPayment}
                hardware-id={hardwareId}
                client-info={clientInfo}
                dealer-inventory={dealerInventory}
                serials={serials}
                sf-order-id={sfOrderId}
                order-item-id={orderItemId}
                user-id={userId}
                payment-info={paymentInfo}
                installation-info={installationInfo}
                origin={origin}
                record-id={recordId}
                logo={logo}
                return-url={returnUrl}
                is-guest-user={isGuestUser}
                onconfirmationnext={handleOrderConfirmationNext}
                onback={handleBack}
                onlogerror={handleLogError}
            ></c-poe_lwc-buyflow-direc-tv-enga-stream-order-confirmation-tab>
        </template>
    </template>
    <template lwc:else>
        <template lwc:if={showDirecTVHardwareTab}>
            <c-poe_lwc-buyflow-direc-tv-enga-hardware-beam
                record-id={recordId}
                user-id={userId}
                cart-info={cartCreditCheck}
                logo={logo}
                return-url={returnUrl}
                origin={origin}
                order-info={orderInfo}
                treatment-code={treatmentCode}
                is-guest-user={isGuestUser}
                onhardwarenext={handleProductDetail}
                onback={handleBack}
                onlogerror={handleLogError}
                onhome={handleHome}
            ></c-poe_lwc-buyflow-direc-tv-enga-hardware-beam>
        </template>
        <template lwc:if={showDirecTVOptionsTab}>
            <c-poe_lwc-buyflow-direc-tv-enga-security-info
                order-info={orderInfo}
                client-info={clientInfo}
                disclaimers={legalCustomizations}
                call-information={orderInfo}
                cart-info={cartOffers}
                logo={logo}
                return-url={returnUrl}
                origin={origin}
                record-id={recordId}
                is-guest-user={isGuestUser}
                onoptionsnext={handleOptionsNext}
                onback={handleBack}
                onlogerror={handleLogError}
            ></c-poe_lwc-buyflow-direc-tv-enga-security-info>
        </template>
        <template lwc:if={showDirecTVTermsTab}>
            <c-poe_lwc-buyflow-direc-tv-enga-terms-tab
                order-info={orderInfo}
                product-terms={terms}
                verbiages={verbiages}
                cart-info={cartOffers}
                client-info={clientInfo}
                logo={logo}
                return-url={returnUrl}
                origin={origin}
                record-id={recordId}
                current-ip={currentIp}
                is-guest-user={isGuestUser}
                ontermsnext={handleTermsNext}
                onback={handleBack}
                onlogerror={handleLogError}
            ></c-poe_lwc-buyflow-direc-tv-enga-terms-tab>
        </template>
        <template lwc:if={showDirecTVPaymentInformation}>
            <c-poe_lwc-buyflow-direc-tv-enga-beam-payment-information-tab
                order-info={orderInfo}
                payment-attempts={paymentAttempts}
                cart-info={cartOffers}
                client-info={clientInfo}
                verbiages={verbiages}
                public-key={publicKey}
                origin={origin}
                record-id={recordId}
                logo={logo}
                return-url={returnUrl}
                is-guest-user={isGuestUser}
                onback={handleBack}
                onpaymentinformationnext={handlePaymentInformationNext}
                onlogerror={handleLogError}
            ></c-poe_lwc-buyflow-direc-tv-enga-beam-payment-information-tab>
        </template>
        <template lwc:if={showDirecTVPaymentConfirmationTab}>
            <c-poe_lwc-buyflow-direc-tv-enga-order-confirmation-tab
                stream={isStream}
                nffl={NFFL}
                hardware-selected={hardwareSelected}
                cart-info={cartPayment}
                payment-info={paymentInfo}
                order-info={orderInfo}
                client-info={clientInfo}
                sf-order-id={sfOrderId}
                order-item-id={orderItemId}
                user-id={userId}
                origin={origin}
                record-id={recordId}
                logo={logo}
                return-url={returnUrl}
                is-guest-user={isGuestUser}
                is-f-s-l={isFSL}
                fsl-work-order-id={fslWorkOrderId}
                fsl-service-appointment-id={fslServiceAppointmentId}
                onback={handleBack}
                onconfirmationnext={handleOrderConfirmationNext}
                onlogerror={handleLogError}
            ></c-poe_lwc-buyflow-direc-tv-enga-order-confirmation-tab>
        </template>
        <template lwc:if={showDirecTVTPVTab}>
            <c-poe_lwc-buyflow-direc-tv-enga-t-p-v-tab
                order-info={orderInfo}
                cart-info={cartPayment}
                order-id={orderId}
                client-info={clientInfo}
                sf-order-id={sfOrderId}
                origin={origin}
                verbiages={verbiages}
                record-id={recordId}
                logo={logo}
                return-url={returnUrl}
                is-guest-user={isGuestUser}
                onback={handleBack}
                ontpvnext={handleTPVNext}
                onlogerror={handleLogError}
            ></c-poe_lwc-buyflow-direc-tv-enga-t-p-v-tab>
        </template>
    </template>
    <template lwc:if={showDirecTVOrderSuccessTab}>
        <c-poe_lwc-buyflow-direc-tv-enga-order-success-tab
            order-number={orderId}
            order-id={orderNumber}
            record-id={recordId}
            email={clientInfo.contactInfo.email}
            phone={clientInfo.contactInfo.phone}
            return-url={returnUrl}
            reference-number={referenceNumber}
            origin={origin}
            is-guest-user={isGuestUser}
            onback={handleBack}
            onlogerror={handleLogError}
        ></c-poe_lwc-buyflow-direc-tv-enga-order-success-tab>
    </template>
    <template lwc:if={showLoaderSpinner}>
        <lightning-spinner variant="brand" alternative-text="Loading..." size="medium"></lightning-spinner>
    </template>
</template>
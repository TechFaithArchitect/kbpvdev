<template>
    <template lwc:if={loaderSpinner}>
        <lightning-spinner variant="brand" alternative-text="Loading..." size="medium"></lightning-spinner>
    </template>
    <template lwc:else>
        <div class="slds-box slds-theme_default">
            <div class="slds-grid slds-gutters slds-var-p-around_medium slds-grid_align-center">
                <div class="slds-col slds-size_5-of-12 slds-var-m-around_medium">
                    <template lwc:if={showPasswordFields}>
                        <div class="slds-var-m-bottom_medium">
                            <lightning-formatted-text value={conditions}></lightning-formatted-text>
                        </div>
                        <lightning-input
                            type="password"
                            label="New Password"
                            value={password}
                            onchange={handlePasswordChange}
                            onblur={handlePasswordRepeatValidation}
                        >
                        </lightning-input>

                        <lightning-input
                            type="password"
                            label="Confirm your New Password"
                            value={repeatPassword}
                            onchange={handleRepeatPasswordChange}
                            onblur={handlePasswordRepeatValidation}
                        >
                        </lightning-input>

                        <div class="slds-var-m-top_medium slds-align_absolute-center">
                            <lightning-button
                                label="Reset Password"
                                onclick={handleSubmit}
                                variant="brand"
                                disabled={passwordMismatch}
                            ></lightning-button>
                        </div>
                    </template>
                    <template lwc:else>
                        <div class="slds-text-heading_large slds-text-align_center" style="color: #00c6b7">
                            Your new Password has been set!
                        </div>
                        <div class="slds-col slds-var-m-top_medium slds-align_absolute-center">
                            <lightning-button
                                label="Return to Chuzo"
                                onclick={redirect}
                                variant="brand"
                            ></lightning-button>
                        </div>
                    </template>
                    <template lwc:if={message}>
                        <div class="slds-var-m-top_medium">
                            <lightning-formatted-text value={message} style="color: red"></lightning-formatted-text>
                        </div>
                    </template>
                </div>
            </div>
        </div>
    </template>
</template>
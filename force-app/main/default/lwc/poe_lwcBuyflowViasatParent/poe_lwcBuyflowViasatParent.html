<template>
    <div class="slds-p-vertical_medium">
        <c-poe_lwc-progress-indicator steps={buyflowSteps} current-step={currentStep}> </c-poe_lwc-progress-indicator>
    </div>
    <template lwc:if={showViasatInfoTab}>
        <c-poe_lwc-buyflow-viasat-info-tab
            record-id={recordId}
            logo={logo}
            is-guest-user={isGuestUser}
            origin={origin}
            user-id={userId}
            oncheckserviceability={handleCheckServiceability}
            onback={handleBack}
            onlogerror={handleLogError}
            referral-code-data={referralCodeData}
        ></c-poe_lwc-buyflow-viasat-info-tab>
    </template>
    <template lwc:if={showViasatProductsPreviewTab}>
        <c-poe_lwc-buyflow-viasat-products-preview-tab
            record-id={recordId}
            user-id={userId}
            is-guest-user={isGuestUser}
            logo={logo}
            origin={origin}
            payload={productCallout}
            onconfirm={handleProductPreview}
            onback={handleBack}
            onlogerror={handleLogError}
            referral-code-data={referralCodeData}
        ></c-poe_lwc-buyflow-viasat-products-preview-tab>
    </template>
    <template lwc:if={showViasatCreditCheckTab}>
        <c-poe_lwc-buyflow-viasat-credit-check-tab
            record-id={recordId}
            user-id={userId}
            user-info={userInfo}
            is-guest-user={isGuestUser}
            customer-id={productSelectionCallout.customerId}
            logo={logo}
            origin={origin}
            client-info={clientInfo}
            payload={productCallout}
            referral-code-data={referralCodeData}
            onusercreated={handleUserCreation}
            onback={handleBack}
            onlogerror={handleLogError}
        ></c-poe_lwc-buyflow-viasat-credit-check-tab>
    </template>
    <template lwc:if={showViasatProductsTab}>
        <c-poe_lwc-buyflow-viasat-products-tab
            record-id={recordId}
            account-id={accountId}
            consent={consent}
            party-id={partyId}
            is-guest-user={isGuestUser}
            user-id={userId}
            logo={logo}
            origin={origin}
            client-info={clientInfo}
            payload={productSelectionCallout}
            onnext={handleProductSelection}
            onback={handleBack}
            onlogerror={handleLogError}
            referral-code-data={referralCodeData}
        ></c-poe_lwc-buyflow-viasat-products-tab>
    </template>
    <template lwc:if={showViasatConfigurationsTab}>
        <c-poe_lwc-buyflow-viasat-configuration-tab
            logo={logo}
            user-id={userId}
            is-guest-user={isGuestUser}
            record-id={recordId}
            offer-id={offerId}
            candidates={candidates}
            cart-info={cartProducts}
            product-selection={productConfigurationsCallout}
            client-info={clientInfo}
            onnext={handleConfigurationsNext}
            onback={handleBack}
            onlogerror={handleLogError}
        ></c-poe_lwc-buyflow-viasat-configuration-tab>
    </template>
    <template lwc:if={showViasatVoiceTab}>
        <c-poe_lwc-buyflow-viasat-voice-tab
            logo={logo}
            user-id={userId}
            record-id={recordId}
            is-guest-user={isGuestUser}
            candidates={candidates}
            cart-info={cartConfigurations}
            client-info={clientInfo}
            configuration-selection={configurationOrderRequest}
            voice-id={voiceId}
            product-candidate-id={productCandidateId}
            selected-addons-and-offers={selectedAddonsAndOffers}
            onnext={handleVoiceNext}
            onback={handleBack}
            onlogerror={handleLogError}
        ></c-poe_lwc-buyflow-viasat-voice-tab>
    </template>
    <template lwc:if={showViasatTermsTab}>
        <c-poe_lwc-buyflow-viasat-terms-tab
            record-id={recordId}
            logo={logo}
            user-id={userId}
            reference-number={referenceNumber}
            is-guest-user={isGuestUser}
            cart-info={cartConfigurations}
            origin={origin}
            show-disclosures={showDisclosures}
            onnext={handleTermsNext}
            onback={handleBack}
            onlogerror={handleLogError}
        ></c-poe_lwc-buyflow-viasat-terms-tab>
    </template>
    <template lwc:if={showViasatCheckoutTab}>
        <c-poe_lwc-buyflow-viasat-checkout-tab
            record-id={recordId}
            logo={logo}
            user-id={userId}
            payment-attempts={paymentAttempts}
            reference-number={referenceNumber}
            is-guest-user={isGuestUser}
            client-info={clientInfo}
            caf-product={showDisclosures.connection25}
            customer-id={productSelectionCallout.customerId}
            cart-info={cartConfigurations}
            origin={origin}
            billing-details={billingDetails}
            oncreditcardvalidated={handleCheckoutNext}
            onback={handleBack}
            onbillingsuccess={handleBillingSuccess}
            onlogerror={handleLogError}
        ></c-poe_lwc-buyflow-viasat-checkout-tab>
    </template>
    <template lwc:if={showViasatTPVTab}>
        <c-poe_lwc-buyflow-viasat-t-p-v-tab
            record-id={recordId}
            callout={tpvCallout}
            user-id={userId}
            reference-number={referenceNumber}
            client-info={clientInfo}
            is-guest-user={isGuestUser}
            cart-info={cartConfigurations}
            origin={origin}
            date-selected={dateSelected}
            logo={logo}
            ontpvnext={handleTPVNext}
            onback={handleBack}
            onlogerror={handleLogError}
        ></c-poe_lwc-buyflow-viasat-t-p-v-tab>
    </template>
    <template lwc:if={showViasatOrderConfirmationTab}>
        <c-poe_lwc-buyflow-viasat-order-confirmation-tab
            record-id={recordId}
            logo={logo}
            user-id={userId}
            cart-info={cartConfigurations}
            is-guest-user={isGuestUser}
            origin={origin}
            sf-order-id={sfOrderId}
            sf-order-item-id={sfOrderItemId}
            shipping={shippingCost}
            callout-info={confirmationCallout}
            onorderconfirmationnext={handleOrderConfirmationNext}
            onback={handleBack}
            onlogerror={handleLogError}
        ></c-poe_lwc-buyflow-viasat-order-confirmation-tab>
    </template>
    <template lwc:if={showViasatOrderSuccessTab}>
        <c-poe_lwc-buyflow-viasat-order-success-tab
            order-number={orderId}
            order-id={orderId}
            is-guest-user={isGuestUser}
            record-id={recordId}
            phone={clientInfo.contactInfo.phone}
            email={clientInfo.contactInfo.email}
            user-id={userId}
            reference-number={referenceNumber}
            origin={origin}
            client-info={clientInfo}
            onback={handleBack}
            onlogerror={handleLogError}
        ></c-poe_lwc-buyflow-viasat-order-success-tab>
    </template>
    <template lwc:if={showLoaderSpinner}>
        <lightning-spinner variant="brand" alternative-text="Loading..." size="medium"></lightning-spinner>
    </template>
</template>